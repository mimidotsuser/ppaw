<div class="container-fluid">

  <div class="d-flex justify-content-between align-items-center my-3 gap-2 flex-wrap-reverse">
    <div class="col-sm-6 col-md-4 data-filters">
      <input type="text" class="form-control search" placeholder="Filter"
             [formControl]="productSearchInput">
    </div>

    <div class="d-md-block">
      <button type="button" class="btn btn-outline-primary"
              (click)="showCreateProductFormPopup()">
        + New Machine Item
      </button>
    </div>

  </div>

</div>
<div class="container-md-fluid">
  <table class="table table-hover table-block-sm">
    <thead>
    <tr>
      <th>Item Code</th>
      <th>M-PN</th>
      <th>Description</th>
      <th>EOQ</th>
      <th>MIN-L</th>
      <th>RO-L</th>
      <th>MAX-L</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let prod of products|async">

      <td>
        <span class="td-inline-label">Item Code</span>
        {{prod.item_code}}
      </td>
      <td>
        <span class="td-inline-label">M-PN</span>
        {{prod.mpn}}
      </td>
      <td>
        <span class="td-inline-label">Description</span>
        {{prod.description}}
      </td>
      <td data-label="EOQ">
        <span class="td-inline-label">EOQ</span>
        {{prod.eoq}}
      </td>
      <td>
        <span class="td-inline-label">MIN-L</span>
        {{prod.minl}}
      </td>
      <td>
        <span class="td-inline-label">RO-L</span>
        {{prod.rol}}
      </td>
      <td>
        <span class="td-inline-label">MAX-L</span>
        {{prod.maxl}}
      </td>
      <td>
        <div class="d-flex gap-2 justify-content-end w-100">
          <div ngbDropdown class="d-inline-block">
            <button class="btn btn-outline-secondary hide-dropdown-toggle" id="dp"
                    ngbDropdownToggle>
              <fa-icon [icon]="faEllipsisV"></fa-icon>
            </button>
            <div ngbDropdownMenu aria-labelledby="dp">

              <button ngbDropdownItem (click)="showProductEditForm(prod)">Edit</button>
              <button ngbDropdownItem (click)="deleteProduct(prod)">Delete</button>
            </div>
          </div>
        </div>
      </td>
    </tr>


    </tbody>
  </table>

</div>

<app-side-popup [(show)]="showMachineFormPopup"
                [title]="this.model?.id?'Update Machine Item':'Create Machine Item'">

  <app-product-form [model]="this.model" [hasParent]="false" #machineFormComponent>
    <div class="d-flex gap-2">

      <button type="submit" class="btn btn-primary" *ngIf="!this.model?.id"
              (click)="saveProductForm(machineFormComponent.form)">
        CREATE
      </button>
      <button type="submit" class="btn btn-primary" *ngIf="this.model?.id"
              (click)="saveProductForm(machineFormComponent.form)">
        UPDATE
      </button>
      <button type="button" class="btn btn-cancel"
              (click)="this.closeProductFormPopup(machineFormComponent.form)">
        CANCEL
      </button>
    </div>
  </app-product-form>

</app-side-popup>
